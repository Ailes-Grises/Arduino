# What's this !?(・8・)
Private Wars (easy) の自動化マシン．
<del>一週間に50回もライブ(その内30回はフルコン)とか機械にやらせるべきだよね(・8・)</del>
![スクフェス自動化マシン](https://raw.githubusercontent.com/Ailes-Grises/Arduino/img/love_live!/machine.jpg "スクフェス自動化マシン")

# 使用部品!(・8・)
このマシンを開発するにあたって，以下のパーツを使用した．
使用パーツの選定基準は，できるだけ安く，なおかつ手に入りやすいものを優先的に採用した．
結果的に回路パーツ以外は全て100均製になった．
その他の回路パーツは全て秋葉原で購入した．
面倒な人は通販でも問題ない．

断熱マットは，100均で売っている断熱パネルで，よくコルクマットなどと一緒に売っている．
土台として使用するだけなのでコルクマットでも良いのだが，サーボモータをネジで直接固定するため，できるだけ分厚いものが望ましい．
今回は厚さ約1cm 程度のものを使用した．

```
Arduino Uno       (¥3,300)  x 1
TowerPro SG90     (¥400)    x 9
クリップ(大)      (¥100)    x 1
導電性スポンジ    (¥60)     x 1
絶縁テープ        (¥50)     x 1
断熱マット        (¥100)    x 1
ブレッドボード    (¥200)    x 1
ジャンパ線        (¥500)    x 適宜
ピンヘッダ        (¥60)     x 適宜

合計 ¥7,970
```
![使用パーツ一覧](https://raw.githubusercontent.com/Ailes-Grises/Arduino/img/love_live!/zentai_2.jpg "使用パーツ一覧")

# サーボモータ!(・8・)
今回は，サーボモータとして秋葉で最も安かったTowerPro 社のSG90 というモータを採用した．
TowerPro のサーボは定番のようだが，もう少し堅牢なものが良ければ，浅草ギ研のサーボなどが良いだろう(ただし最安値でも600円，9個揃えることを考えると金額が痛い(;8;))．
![TowerPro SG90](https://raw.githubusercontent.com/Ailes-Grises/Arduino/img/love_live!/servo_1.jpg "TowerPro SG90")

TowerPro SG90 の配線は，
```
黄色 : PWM(パルス信号)
赤   : Vcc(+)
茶色 : Gnd(-)
```
となっている．

今回は，サーボの制御ピンとしてArduino のDIGITAL 2〜10 ピンを使用する．
また，サーボの動作電圧が4.8V なので，電源はPOWER の5V ピンとGND ピンを使用する．

取り付けの際は，断熱マットの切れ端を正方形に加工し，これとサーボを絶縁テープで巻いて高さを出した．
というのも，ロボットアームの部分に関してはクリップを折り曲げて作成しているため，根本的にタッチする力が弱い．
そこで，モーメントを稼ぐために，モータの位置自体を高くしてタッチする力を強化した．
![サーボの加工](https://raw.githubusercontent.com/Ailes-Grises/Arduino/img/love_live!/servo_2.jpg "サーボの加工")

モータの取り付けに関しては，サーボモータに絶縁テープ(黄色)を巻いて羽を付け，この羽の部分をサーボモータ付属の金属製ネジで固定した．
畳んだ絶縁テープは穴が空きにくいため，あらかじめ安全ピンで穴を開けてからネジ止めしたほうが良い．

# タッチペン!(・8・)
タッチペンを9本買うと，100均でも約1,000円かかる．
しかも物によっては重いし，長い．
なによりタッチペン(100均製)に1,000円も払うなんて馬鹿らしい．
なので，タッチペンを9本自作することにした．

スマホのタッチパネルの機構には，抵抗膜方式と静電容量方式の2つがある．
このうち，最近のスマホでよく使われているは後者だ．
静電容量方式には更に表面型と投影型があるが，このあたりは割愛する．
要するに，スマホの表面は微弱な電界で覆われており，この表面に人間の指などの導体が触れることによって，スマホの表面の電界に変化が生じ，この変化を読み取ることによってタッチした位置を検出している．
つまり，タッチペンを作るには，スマホ表面の電界を変化させることができれば良い．

しかしながら，ただ金属が触れるだけでは何故かスマホは反応しなかった．
近年のスマホのタッチパネルは予想以上に人間の指に特化しており，ただ金属が触れるだけでは反応しないようになっている．
これは，不慮の誤操作を防ぐ意味では非常に重要な事なのだが，タッチペンを自作する側の人間としては少々厄介である．

結論から言うと，スマホが反応するには**ペン先が導体かつ人間の指のようにぷにぷにしている必要がある．**
より人間の指に近い感触でないとダメなので，例えば表面がとげとげしていたり，妙にツルツルしていたりすると反応が悪い．
また，普通に考えて「導体=金属」なので，「ぷにぷにの金属」を見つけるのは難しい(先端が樹脂製のタッチペンに関しては，樹脂の部分が特殊な導体ファイバになっているようだが，それを入手するのは不可能だし，ペン先だけ9個そろえるなら結局100均と変わらない)．
そこで，色々と調べたところ，秋月電子に「導電性スポンジ」なるものが売っていることを知った．
![導電性スポンジ](https://raw.githubusercontent.com/Ailes-Grises/Arduino/img/love_live!/sponge.jpg "導電性スポンジ")

これは，その名の通り導電性のスポンジで，弾力はそれほど無いが十分にスポンジと呼べる代物であった．
そこで，このスポンジを細長くカットし，これをたわませ，絶縁テープで固定することによってぷにぷにした感触を実現した．
<del>このスポンジを用いるアイディアに至るまでものすごく試行錯誤したしなんなら一番時間掛かった(;8;)</del>
![タッチペン](https://raw.githubusercontent.com/Ailes-Grises/Arduino/img/love_live!/arm_1.jpg "タッチペン")

# アームの作成!(・8・)
サーボモータのアームに関しては，100均のLサイズクリップを使った．
ロボット開発者のためにTAMIYA などがユニバーサルアームレットというプラスチック製の汎用アームを販売しているが，9本のアームを作ろうとすると高いし，それなりの耐久性があって加工しやすければ何でも良かったため，一番手軽なクリップを採用した．
ただし，いくら大きめのクリップを使っても，所詮はクリップなので，やはり力(トルク)が伝わりにくい．
したがって，アームの形に関しては意外と工夫させられた．

まず，サーボ付属のプラスチック製アタッチメントの穴は非常に狭いため，付属のネジで穴を大きくした．
一番先端の穴を広げようとするとプラスチックが割れるので注意が必要．
次に，クリップを曲げてアタッチメントにクリップを通す．
ここでは手芸用の折り曲げ用途のラジオペンチ(先端の形が特殊)が大変役に立った．

![アームの作成](https://raw.githubusercontent.com/Ailes-Grises/Arduino/img/love_live!/arm_2.jpg "アームの作成")

あとはただ針金を曲げていくだけだが，モーメントを稼ぎたいので，針金の角度を工夫した．
具体的には，針金の中心付近に軽く折り目を付け，プラスチックの付いている側の金属に関しては緩やかなアーチ構造にする．
反対側に関しては，画面をタッチする力をペン先に無駄なく伝えたいため，直線のまま折り曲げず，スポンジの取り付け用に先端だけ僅かに曲げた．
最後に，アームの端からペン先までの直線距離が7cm 程度になるように調整した．
この角度が6cm 以下だと，並べた時にサーボ同士が干渉してしまう．

# ボードの作成
断熱ボードを加工して台座を作る．
まず，スマホでスクフェスを立ち上げ，ライブの画面でスクリーンショットをとっておく．
次に，薄手の紙にスマホの外周の型を取り，カットする．
そしてその紙をスマホの上にマスキングし，先程のスクショ画面の上からプレイ画面を紙の上に複製する．
こうして作成した複製紙を断熱ボートに転写する．
スクフェスにはタップボタンが9箇所あるため，180 ÷ 8 = 22.5度間隔で中心から線を引いた延長線上にタップボタンがある．

![ボードの作成](https://raw.githubusercontent.com/Ailes-Grises/Arduino/img/love_live!/matt.jpg "ボードの作成")

あとはこのボードに先述のサーボモータを付属のネジで固定していく．

# 配線
わざわざ書くほどのものでも無いが，一応書いておく．
サーボの配線は上述の通り信号線，電源線，GND線が横並びになっているため，これらをただ横に並べていっただけである．
赤い線は全てブレッドボード上の+ に繋ぎ，茶色い線は- に繋いだ．
そして，+ はArduino のPOWER の5V に，- はGND に繋いだ．
信号線に関しては，DIGITAL の2〜10 番ピンに繋いだ．
![配線](https://raw.githubusercontent.com/Ailes-Grises/Arduino/img/love_live!/circuit.jpg "配線")

使わなくても良いが，ピンヘッダを使った方がきれいに並ぶし安定感も良い．
間違えてハーフピッチのものを買わないように気をつけること．
画像では途中で段が切り替わっているが，これはそうしないとサーボのソケットが入らなかったからである．

# (・口・) 〜bb
```
Can I do? I take it, Baby!
Can I do? I make it, Baby!
Can I do? I take it, Baby!
Can I do? I make it, Baby!

そう行っちゃうの?
追いかけないけど
基本だね 群れるのキライよ

Wow!!

孤独の切なさ 分かる人だけど
時々言葉を交わし合って
お互いの場所で お互いの想い
高める each other's day

What'cha do?  What'cha do?
I do "Private Wars"
ほら正義と狡さを手にして
What'cha do?  What'cha do?
I do "Private Wars"
ほら人生の勇気と情熱でしょう?

Can I do? I take it, Baby!
Can I do? I make it, Baby!
Can I do? I take it, Baby!
Can I do? I make it, Baby!
```

# ｲｴﾆｶｴｯﾁｬｯﾀﾉｫ!?
はい．

